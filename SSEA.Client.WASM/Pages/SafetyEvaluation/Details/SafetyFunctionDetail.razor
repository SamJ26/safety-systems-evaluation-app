@page "/safetyEvaluation/safetyFunctionDetail/{methodics}/{id:int?}"

@layout MainLayout

@* TODO: 1. from SafetyFunctionDetailModel for PL and SIL replace EvaluationMethod ref with string representation of eval method *@

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Style="padding-top: 10px;">
    <MudGrid>
        <MudItem xs="2">
        </MudItem>
        <MudItem xs="8" Style="padding-bottom: 30px;">
            <MudCard Elevation="3">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">Safety function detail</MudText>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudIconButton Icon="@Icons.Material.Filled.ArrowBack" Color="Color.Default" />
                        <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Default" />
                        <MudIconButton Icon="@Icons.Material.Filled.Save" Color="Color.Default" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    @if (Methodics.Equals("PL"))
                    {
                        <SafetyFunctionPL Model="modelPL" />
                    }
                    else
                    {
                        <SafetyFunctionSIL Model="modelSIL" />
                    }
                </MudCardContent>
                <MudCardActions>
                    <MudGrid>
                        <MudItem xs="6" Style="padding-left: 21px; padding-bottom: 20px; padding-top: 5px;">
                            <MudButton Variant="Variant.Filled" Style="width:100%;">Edit</MudButton>
                        </MudItem>
                        <MudItem xs="6" Style="padding-right: 21px; padding-bottom: 20px; padding-top: 5px;">
                            <MudButton Variant="Variant.Filled" Style="width:100%;">Save</MudButton>
                        </MudItem>
                    </MudGrid>
                </MudCardActions>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
        </MudItem>
    </MudGrid>
</MudContainer>

@code {

    [Parameter]
    public int Id { get; set; }

    [Parameter]
    public string Methodics { get; set; }

    public SafetyFunctionDetailModelPL modelPL;
    public SafetyFunctionDetailModelSIL modelSIL;

    /// <summary>
    /// Method fetches data from server according to id in route
    /// </summary>
    protected override void OnInitialized()
    {
        // TODO: fetch all typeOfFunctions
        if (Methodics.Equals("PL"))
        {
            modelPL = new SafetyFunctionDetailModelPL();
            // TODO: Fetch data according to id in route to modelPL
        }
        else
        {
            modelSIL = new SafetyFunctionDetailModelSIL();
            // TODO: Fetch data according to id in route to modelSIL
        }
    }

}
