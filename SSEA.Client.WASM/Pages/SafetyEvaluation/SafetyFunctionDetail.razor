@page "/safetyEvaluation/safetyFunctionDetail/{methodics}/{id:int?}"

@layout MainLayout

@* TODO: 1. from SafetyFunctionDetailModel for PL and SIL replace EvaluationMethod ref with string representation of eval method
         2. add Communication prop to SafetyFunctionDetailModel *@

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Style="padding-top: 10px;">
    <MudGrid>
        <MudItem xs="2">
        </MudItem>
        <MudItem xs="8" Style="padding-bottom: 30px;">
            <MudCard Elevation="3">
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">Safety function detail</MudText>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudIconButton Icon="@Icons.Material.Filled.ArrowBack" Color="Color.Default" />
                        <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Default" />
                        <MudIconButton Icon="@Icons.Material.Filled.Save" Color="Color.Default" />
                    </CardHeaderActions>
                </MudCardHeader>
                <MudCardContent>
                    @if (Methodics.Equals("PL"))
                    {
                        <SafetyFunctionPL Model="modelPL" />
                    }
                    else
                    {
                        <SafetyFunctionSIL Model="modelSIL" />
                    }
                    <MudGrid>
                        <MudItem xs="12">
                            <hr style="margin-top: 10px; margin-bottom: 10px;"/>
                        </MudItem>
                        <MudItem xs="12" Style="padding-top: 5px; padding-bottom: 5px;">
                            <MudPaper Outlined="true" Style="display: flex;">
                                <MudButton DisableElevation="true" DisableRipple="true" Variant="Variant.Text">Input subsystem</MudButton>
                                <MudAppBarSpacer></MudAppBarSpacer>
                                <MudText Style="padding: 6px; margin: 5px 30px;">@methodShortcut: A</MudText>
                                <MudText Style="padding: 6px; margin-top: 5px; margin-bottom: 5px;">Completed: </MudText>
                                <MudIcon Icon="@Icons.Material.Filled.Done" Style="margin: 10px 5px;" />
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" Style="padding-top: 5px; padding-bottom: 5px;">
                            <MudPaper Outlined="true" Style="display: flex;">
                                <MudButton DisableElevation="true" DisableRipple="true" Variant="Variant.Text">Communication subsystem 1</MudButton>
                                <MudAppBarSpacer></MudAppBarSpacer>
                                <MudText Style="padding: 6px; margin: 5px 30px;">@methodShortcut: A</MudText>
                                <MudText Style="padding: 6px; margin-top: 5px; margin-bottom: 5px;">Completed: </MudText>
                                <MudIcon Icon="@Icons.Material.Filled.Close" Style="margin: 10px 5px;" />
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" Style="padding-top: 5px; padding-bottom: 5px;">
                            <MudPaper Outlined="true" Style="display: flex;">
                                <MudButton DisableElevation="true" DisableRipple="true" Variant="Variant.Text">Logic subsystem</MudButton>
                                <MudAppBarSpacer></MudAppBarSpacer>
                                <MudText Style="padding: 6px; margin: 5px 30px;">@methodShortcut: A</MudText>
                                <MudText Style="padding: 6px; margin-top: 5px; margin-bottom: 5px;">Completed: </MudText>
                                <MudIcon Icon="@Icons.Material.Filled.Close" Style="margin: 10px 5px;" />
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" Style="padding-top: 5px; padding-bottom: 5px;">
                            <MudPaper Outlined="true" Style="display: flex;">
                                <MudButton DisableElevation="true" DisableRipple="true" Variant="Variant.Text">Communication subsystem 2</MudButton>
                                <MudAppBarSpacer></MudAppBarSpacer>
                                <MudText Style="padding: 6px; margin: 5px 30px;">@methodShortcut: A</MudText>
                                <MudText Style="padding: 6px; margin-top: 5px; margin-bottom: 5px;">Completed: </MudText>
                                <MudIcon Icon="@Icons.Material.Filled.Close" Style="margin: 10px 5px;" />
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" Style="padding-top: 5px; padding-bottom: 5px;">
                            <MudPaper Outlined="true" Style="display: flex;">
                                <MudButton DisableElevation="true" DisableRipple="true" Variant="Variant.Text">Output subsystem</MudButton>
                                <MudAppBarSpacer></MudAppBarSpacer>
                                <MudText Style="padding: 6px; margin: 5px 30px;">@methodShortcut: A</MudText>
                                <MudText Style="padding: 6px; margin-top: 5px; margin-bottom: 5px;">Completed: </MudText>
                                <MudIcon Icon="@Icons.Material.Filled.Close" Style="margin: 10px 5px;" />
                            </MudPaper>
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
                <MudCardActions>
                    <MudGrid>
                        <MudItem xs="6" Style="padding-left: 21px; padding-bottom: 20px; padding-top: 5px;">
                            <MudButton Variant="Variant.Filled" Style="width:100%;">Edit</MudButton>
                        </MudItem>
                        <MudItem xs="6" Style="padding-right: 21px; padding-bottom: 20px; padding-top: 5px;">
                            <MudButton Variant="Variant.Filled" Style="width:100%;">Save</MudButton>
                        </MudItem>
                    </MudGrid>
                </MudCardActions>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
        </MudItem>
    </MudGrid>
</MudContainer>

@code {

    [Parameter]
    public int Id { get; set; }

    [Parameter]
    public string Methodics { get; set; }

    public SafetyFunctionDetailModelPL modelPL;
    public SafetyFunctionDetailModelSIL modelSIL;

    private string methodShortcut = string.Empty;

    /// <summary>
    /// Method fetches data from server according to id in route
    /// </summary>
    protected override void OnInitialized()
    {
        // TODO: fetch all typeOfFunctions
        if (Methodics.Equals("PL"))
        {
            methodShortcut = "PL";
            modelPL = new SafetyFunctionDetailModelPL();
            // TODO: Fetch data according to id in route to modelPL
        }
        else
        {
            methodShortcut = "SIL";
            modelSIL = new SafetyFunctionDetailModelSIL();
            // TODO: Fetch data according to id in route to modelSIL
        }
    }

}
